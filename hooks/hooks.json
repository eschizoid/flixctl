[
  {
    "id": "admin",
    "execute-command": "/opt/webhook-linux-amd64/admin.sh",
    "include-command-output-in-response": true
  },
  {
    "id": "upgrade",
    "execute-command": "/opt/webhook-linux-amd64/upgrade.sh",
    "response-message": "Upgrading flixctl"
  },
  {
    "id": "movies-search",
    "execute-command": "/opt/webhook-linux-amd64/torrent.sh",
    "command-working-directory": "/home/webhook/go/bin",
    "response-message": "Executing search command",
    "pass-environment-to-command": [
      {
        "source": "payload",
        "name": "text",
        "envname": "KEYWORDS"
      },
      {
        "source": "payload",
        "name": "directory",
        "envname": "DOWNLOAD_DIR"
      }
    ],
    "pass-arguments-to-command": [
      {
        "source": "string",
        "name": "search"
      }
    ],
    "trigger-rule": {
      "match": {
        "type": "value",
        "value": "{{getenv "SLACK_MOVIES_SEARCH_TOKEN"}}",
        "parameter": {
          "source": "payload",
          "name": "token"
        }
      }
    }
  },
  {
    "id": "shows-search",
    "execute-command": "/opt/webhook-linux-amd64/torrent.sh",
    "command-working-directory": "/home/webhook/go/bin",
    "response-message": "Executing search command",
    "pass-environment-to-command": [
      {
        "source": "payload",
        "name": "text",
        "envname": "KEYWORDS"
      },
      {
        "source": "payload",
        "name": "directory",
        "envname": "DOWNLOAD_DIR"
      }
    ],
    "pass-arguments-to-command": [
      {
        "source": "string",
        "name": "search"
      }
    ],
    "trigger-rule": {
      "match": {
        "type": "value",
        "value": "{{getenv "SLACK_SHOWS_SEARCH_TOKEN"}}",
        "parameter": {
          "source": "payload",
          "name": "token"
        }
      }
    }
  },
  {
    "id": "torrent-download",
    "execute-command": "/opt/webhook-linux-amd64/torrent.sh",
    "command-working-directory": "/home/webhook/go/bin",
    "response-message": "Executing download command",
    "pass-environment-to-command": [
      {
        "source": "url",
        "name": "n",
        "envname": "TORRENT_NAME"
      },
      {
        "source": "url",
        "name": "m",
        "envname": "MAGNET_LINK"
      },
      {
        "source": "url",
        "name": "d",
        "envname": "DOWNLOAD_DIR"
      }
    ],
    "pass-arguments-to-command": [
      {
        "source": "string",
        "name": "download"
      }
    ],
    "trigger-rule": {
      "match": {
        "type": "value",
        "value": "{{getenv "SLACK_MOVIES_SEARCH_TOKEN"}}",
        "parameter": {
          "source": "url",
          "name": "t",
          "envname": "QUERY"
        }
      }
    }
  },
  {
    "id": "torrent-status",
    "execute-command": "/opt/webhook-linux-amd64/torrent.sh",
    "command-working-directory": "/home/webhook/go/bin",
    "response-message": "Executing status command",
    "pass-arguments-to-command": [
      {
        "source": "string",
        "name": "status"
      }
    ],
    "trigger-rule": {
      "match": {
        "type": "value",
        "value": "{{getenv "SLACK_STATUS_TOKEN"}}",
        "parameter": {
          "source": "payload",
          "name": "token"
        }
      }
    }
  },
  {
    "id": "initiate-inventory",
    "execute-command": "/opt/webhook-linux-amd64/library.sh",
    "command-working-directory": "/home/webhook/go/bin",
    "response-message": "Executing initiate catalogue job",
    "pass-arguments-to-command": [
      {
        "source": "string",
        "name": "initiate"
      }
    ],
    "pass-environment-to-command": [
      {
        "source": "url",
        "name": "t",
        "envname": "INITIATE_TYPE"
      }
    ],
    "trigger-rule": {
      "match": {
        "type": "value",
        "value": "{{getenv "SLACK_STATUS_TOKEN"}}",
        "parameter": {
          "source": "payload",
          "name": "token"
        }
      }
    }
  },
  {
    "id": "retrieve-inventory",
    "execute-command": "/opt/webhook-linux-amd64/library.sh",
    "command-working-directory": "/home/webhook/go/bin",
    "response-message": "Executing retrieve catalogue job",
    "pass-arguments-to-command": [
      {
        "source": "string",
        "name": "retrieve"
      }
    ],
    "pass-environment-to-command": [
      {
        "source": "url",
        "name": "t",
        "envname": "RETRIEVAL_TYPE"
      },
      {
        "source": "url",
        "name": "j",
        "envname": "JOB_ID"
      }
    ],
    "trigger-rule": {
      "match": {
        "type": "value",
        "value": "{{getenv "SLACK_STATUS_TOKEN"}}",
        "parameter": {
          "source": "payload",
          "name": "token"
        }
      }
    }
  },
  {
    "id": "retrieve-archive",
    "execute-command": "/opt/webhook-linux-amd64/library.sh",
    "command-working-directory": "/home/webhook/go/bin",
    "response-message": "Executing retrieve file job",
    "pass-arguments-to-command": [
      {
        "source": "string",
        "name": "retrieve"
      }
    ],
    "pass-environment-to-command": [
      {
        "source": "url",
        "name": "t",
        "envname": "RETRIEVAL_TYPE"
      },
      {
        "source": "url",
        "name": "j",
        "envname": "JOB_ID"
      }
    ],
    "trigger-rule": {
      "match": {
        "type": "value",
        "value": "{{getenv "SLACK_STATUS_TOKEN"}}",
        "parameter": {
          "source": "payload",
          "name": "token"
        }
      }
    }
  },
  {
    "id": "library-jobs",
    "execute-command": "/opt/webhook-linux-amd64/library.sh",
    "command-working-directory": "/home/webhook/go/bin",
    "response-message": "Executing library jobs",
    "pass-arguments-to-command": [
      {
        "source": "string",
        "name": "jobs"
      }
    ],
    "pass-environment-to-command": [
      {
        "source": "url",
        "name": "f",
        "envname": "FILTER"
      }
    ],
    "trigger-rule": {
      "match": {
        "type": "value",
        "value": "{{getenv "SLACK_STATUS_TOKEN"}}",
        "parameter": {
          "source": "payload",
          "name": "token"
        }
      }
    }
  }
]
